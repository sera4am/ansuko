# APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

## lodashé–¢æ•°ã®æ”¹å–„

### `isEmpty(value)`

å€¤ãŒç©ºã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã€‚lodashã¨ç•°ãªã‚Šã€æ•°å€¤ã¨booleanã¯ç©ºã¨ã¯è¦‹ãªã•ã‚Œã¾ã›ã‚“ã€‚

```javascript
// lodashã®å‹•ä½œï¼ˆç›´æ„Ÿçš„ã§ãªã„ï¼‰
_.isEmpty(0)      // => true  (ãªãœï¼Ÿï¼Ÿ)
_.isEmpty(false)  // => true  (æ··ä¹±ã™ã‚‹ï¼)

// ansukoã®å‹•ä½œï¼ˆç›´æ„Ÿçš„ï¼‰
_.isEmpty(0)      // => false (0ã¯æœ‰åŠ¹ãªæ•°å€¤)
_.isEmpty(false)  // => false (falseã¯æœ‰åŠ¹ãªboolean)
_.isEmpty(null)   // => true
_.isEmpty('')     // => true
_.isEmpty([])     // => true
```

### `castArray(value)`

é…åˆ—ã«å¤‰æ›ã€‚null/undefinedã«å¯¾ã—ã¦`[null]`ã§ã¯ãªãç©ºé…åˆ—ã‚’è¿”ã—ã¾ã™ã€‚

```javascript
// lodashã®å‹•ä½œ
_.castArray(null)      // => [null]  (ãªãœï¼Ÿï¼Ÿ)
_.castArray(undefined) // => [undefined]

// ansukoã®å‹•ä½œ
_.castArray(null)      // => []  (ã‚¹ãƒƒã‚­ãƒªï¼)
_.castArray(undefined) // => []
_.castArray([1, 2])    // => [1, 2]
_.castArray(1)         // => [1]

// ã‚‚ã†.filter(Boolean)ã¯ä¸è¦
_.castArray(maybeNull).map(process)  // ãã®ã¾ã¾å‹•ãï¼
```

## æ•°å€¤ã¨Boolean

### `toNumber(value)`

ã‚«ãƒ³ãƒã¨å…¨è§’æ–‡å­—ã«å¯¾å¿œã—ãŸæ•°å€¤å¤‰æ›ã€‚ç„¡åŠ¹ãªå€¤ã«ã¯`NaN`ã§ã¯ãªã`null`ã‚’è¿”ã—ã¾ã™ã€‚

```javascript
_.toNumber('1,234')       // => 1234
_.toNumber('1,234.56')    // => 1234.56
_.toNumber('ï¼‘ï¼’ï¼“')      // => 123 (å…¨è§’å¯¾å¿œ)
_.toNumber(null)          // => null (NaNã§ã¯ãªã„)
_.toNumber('invalid')     // => null (NaNã§ã¯ãªã„)
```

### `boolIf(value, defaultValue)`

ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä»˜ãã®å®‰å…¨ãªbooleanå¤‰æ›ã€‚

```javascript
_.boolIf(1, false)           // => true
_.boolIf(0, false)           // => false
_.boolIf('invalid', false)   // => false (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
```

## å€¤ã®å‡¦ç†

### `valueOr(value, defaultValue)`

å€¤ã‚’å–å¾—ã€ã¾ãŸã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¿”ã™ã€‚null/undefinedã‚’å‡¦ç†ã—ã€Promiseã¨é–¢æ•°è©•ä¾¡ã‚’ã‚µãƒãƒ¼ãƒˆã€‚**Promiseã‚’è‡ªå‹•æ¤œå‡ºãƒ»å‡¦ç†** - å¯èƒ½ãªå ´åˆã¯åŒæœŸçš„ã«ã€å¿…è¦ãªå ´åˆã¯Promiseã‚’è¿”ã—ã¾ã™ã€‚

```javascript
// åŸºæœ¬çš„ãªä½¿ã„æ–¹
_.valueOr(null, 'default')           // => 'default'
_.valueOr(0, 'default')              // => 0
_.valueOr('', 'default')             // => 'default'

// é…å»¶è©•ä¾¡
_.valueOr(null, () => expensiveCalculation())  // å¿…è¦ãªæ™‚ã ã‘å‘¼ã°ã‚Œã‚‹

// Promiseã‚µãƒãƒ¼ãƒˆ - å¿…è¦ãªæ™‚ã«è‡ªå‹•çš„ã«Promiseã‚’è¿”ã™
await _.valueOr(Promise.resolve(42), 0)        // => 42
await _.valueOr(Promise.resolve(null), 0)      // => 0

// é–¢æ•°ã‚µãƒãƒ¼ãƒˆï¼ˆthunkï¼‰
_.valueOr(() => 42, 'default')                 // => 42
_.valueOr(() => null, 'default')               // => 'default'

// Promise/åŒæœŸã®æ··åœ¨ - ã‚¹ãƒãƒ¼ãƒˆæ¤œå‡º
const result1 = _.valueOr('sync', 'default')              // åŒæœŸ: 'sync'
const result2 = await _.valueOr(asyncFn(), 'default')     // Promise: è§£æ±ºã•ã‚ŒãŸå€¤
```

### `equalsOr(value1, value2, defaultValue?)`

å€¤ã‚’æ¯”è¼ƒã—ã€ä¸€è‡´ã—ãªã„å ´åˆã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’æä¾›ã€‚nullã¨undefinedã¯ç­‰ã—ã„ã‚‚ã®ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚**Promiseã‚’è‡ªå‹•å‡¦ç†** - åŒæœŸå€¤ã«ã¯åŒæœŸçš„ã«ã€éåŒæœŸå€¤ã«ã¯Promiseã‚’è¿”ã—ã¾ã™ã€‚

```javascript
// åŸºæœ¬çš„ãªæ¯”è¼ƒ
_.equalsOr(userInput, 'expected', 'default')   // => ä¸€è‡´ã™ã‚Œã°userInputã€ãã†ã§ãªã‘ã‚Œã°'default'

// APIãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
await _.equalsOr(fetchStatus(), 'success', 'failed')

// è¨­å®šã®æ¤œè¨¼
_.equalsOr(config.mode, 'production', 'development')

// nilå€¤ã¯ç­‰ã—ã„ã¨ã¿ãªã•ã‚Œã‚‹
_.equalsOr(null, undefined, 'default')         // => null (ä¸¡æ–¹ã¨ã‚‚nil)

// 2å¼•æ•°ã®ä½¿ã„æ–¹ï¼švalueOrã¨ã—ã¦å‹•ä½œ
_.equalsOr(null, 'default')                    // => 'default'

// Promiseå‡¦ç† - è‡ªå‹•æ¤œå‡º
const sync = _.equalsOr('a', 'a', 'default')              // åŒæœŸ: 'a'
const async = await _.equalsOr(Promise.resolve('a'), 'a', 'default')  // Promise: 'a'

// å®Ÿä¾‹ï¼šç¢ºèªä»˜ããƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚¯ãƒ­ãƒ¼ã‚º
const onClose = () => {
  // å¤‰æ›´ãªã—ï¼šå³åº§ã«ã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆåŒæœŸï¼‰
  // å¤‰æ›´ã‚ã‚Šï¼šç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºï¼ˆéåŒæœŸï¼‰
  _.equalsOr(original, edited, confirmDialog).then(actuallyClose)
}
```

### `changes(sourceObj, currentObj, keys, options?)`

æŒ‡å®šã•ã‚ŒãŸã‚­ãƒ¼ã§2ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé–“ã§å¤‰æ›´ã•ã‚ŒãŸå€¤ã®ã¿ã‚’å–å¾—ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ›´æ–°ã«æœ€é©ã€‚

**å‹ã‚·ã‚°ãƒãƒãƒ£ï¼š**
```typescript
type ChangesOptions = {
    keyExcludes?: boolean
}

function changes<T extends Record<string, any>, E extends Record<string, any>>(
    sourceValue: T,
    currentValue: E,
    keys: string[],
    options?: ChangesOptions
): Record<string, any>
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼š**
- `keyExcludes?: boolean` - `true`ã®å ´åˆã€æŒ‡å®šã•ã‚ŒãŸã‚­ãƒ¼ã‚’é™¤ãå…¨ã‚­ãƒ¼ã®å¤‰æ›´ã‚’å–å¾—ï¼ˆã‚­ãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’åè»¢ï¼‰

**ä¾‹ï¼š**
```javascript
// åŸºæœ¬çš„ãªä½¿ã„æ–¹ - ç‰¹å®šã®ã‚­ãƒ¼ã§æ¯”è¼ƒ
const original = { name: 'John', age: 30, email: 'john@example.com' }
const updated = { name: 'John', age: 31, email: 'john@example.com' }

_.changes(original, updated, ['name', 'age', 'email'])
// => { age: 31 }  (å¤‰æ›´ã•ã‚ŒãŸå€¤ã®ã¿)

// null/undefinedã®é•ã„ã‚’å‡¦ç†
const before = { status: 'active', notes: null }
const after = { status: 'active', notes: undefined }

_.changes(before, after, ['status', 'notes'])
// => { notes: null }  (undefinedã¯DBä¿å­˜ã®ãŸã‚nullã«æ­£è¦åŒ–)

// lodashã®getæ§‹æ–‡ã«ã‚ˆã‚‹ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ‘ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆï¼ˆæ³¨æ„ï¼škeyExcludesãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ‘ã‚¹éå¯¾å¿œï¼‰
_.changes(userA, userB, ['profile.bio', 'settings.theme', 'metadata.tags[0]'])
// => { 'profile': {'bio': 'æ–°ã—ã„è‡ªå·±ç´¹ä»‹'}, 'settings': {'theme': 'dark'} }

// UPDATE ã‚¯ã‚¨ãƒªã«æœ€é©
const userChanges = _.changes(fetchedUser, editedUser, Object.keys(schema))
db.update('users', userId, userChanges)  // å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿æ›´æ–°

// ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’é™¤å¤–
const changes = _.changes(original, updated, ['password', 'secret'], { keyExcludes: true })
// passwordã¨secretã‚’é™¤ãå…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å¤‰æ›´ã‚’è¿”ã™
```

## ãƒ†ã‚­ã‚¹ãƒˆæ­£è¦åŒ–

### `haifun(text, replacement?, expandInterpretation?)`

æ§˜ã€…ãªãƒã‚¤ãƒ•ãƒ³ã€ãƒ€ãƒƒã‚·ãƒ¥ã€æ¨ªç·šæ–‡å­—ã‚’å˜ä¸€ã®ä¸€è²«ã—ãŸæ–‡å­—ã«æ­£è¦åŒ–ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã«è¦–è¦šçš„ã«ä¼¼ã¦ã„ã‚‹ãŒæŠ€è¡“çš„ã«ç•°ãªã‚‹Unicodeæ–‡å­—ãŒå«ã¾ã‚Œã‚‹å ´åˆã®ãƒ†ã‚­ã‚¹ãƒˆæ¯”è¼ƒã€æ¤œç´¢ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œã«å¿…é ˆã€‚

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼š**
- `text?: string` - æ­£è¦åŒ–ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ
- `replacement?: string` - ç½®ãæ›ãˆæ–‡å­—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼š`"â€"` U+2010 HYPHENï¼‰
- `expandInterpretation?: boolean` - `true`ã®å ´åˆã€æ³¢ãƒ€ãƒƒã‚·ãƒ¥ã€ãƒãƒ«ãƒ€ã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã€ç‚¹ç·šã‚‚æ­£è¦åŒ–ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼š`false`ï¼‰

**æˆ»ã‚Šå€¤ï¼š** `string | null` - æ­£è¦åŒ–ã•ã‚ŒãŸæ–‡å­—åˆ—ã€ã¾ãŸã¯å…¥åŠ›ãŒnull/undefinedã®å ´åˆã¯`null`

**æ­£è¦åŒ–ã•ã‚Œã‚‹æ–‡å­—ï¼š**

**åŸºæœ¬æ–‡å­—ï¼ˆå¸¸ã«æ­£è¦åŒ–ï¼‰ï¼š**
- ASCIIãƒã‚¤ãƒ•ãƒ³ãƒã‚¤ãƒŠã‚¹ï¼ˆ`-`ï¼‰ã€enãƒ€ãƒƒã‚·ãƒ¥ï¼ˆ`â€“`ï¼‰ã€emãƒ€ãƒƒã‚·ãƒ¥ï¼ˆ`â€”`ï¼‰ã€æ°´å¹³ãƒãƒ¼ï¼ˆ`â€•`ï¼‰
- æ•°å­¦ãƒã‚¤ãƒŠã‚¹ï¼ˆ`âˆ’`ï¼‰ã€ãƒ•ã‚£ã‚®ãƒ¥ã‚¢ãƒ€ãƒƒã‚·ãƒ¥ã€æ”¹è¡Œä¸å¯ãƒã‚¤ãƒ•ãƒ³
- ç½«ç·šæ–‡å­—ï¼ˆ`â”€`ã€`â”`ã€`â•´`ã€`â•¶`ãªã©ï¼‰
- ç·šã«è¦‹ãˆã‚‹CJKæ–‡å­—ï¼ˆä¸€ã€â¼€ã€ã„§ã€ã…¡ãªã©ï¼‰
- ã‚«ã‚¿ã‚«ãƒŠ/ãƒãƒ³ã‚°ãƒ«é•·éŸ³è¨˜å·ï¼ˆ`ãƒ¼`ã€`ï¿š`ï¼‰
- å¤ä»£æ•°å­—è¨˜å·ï¼ˆğ„ã€ğ†‘ï¼‰
- ãã®ä»–20ç¨®é¡ä»¥ä¸Šã®Unicodeãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³

**æ‹¡å¼µæ–‡å­—ï¼ˆ`expandInterpretation: true`ã®å ´åˆï¼‰ï¼š**
- æ³¢ãƒ€ãƒƒã‚·ãƒ¥ã¨ãƒãƒ«ãƒ€ï¼ˆ`ã€œ`ã€`~`ï¼‰
- ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ï¼ˆ`_`ã€`ï¼¿`ï¼‰
- ä¸Šç·š/ãƒã‚¯ãƒ­ãƒ³ï¼ˆ`ï¿£`ã€`Ë‰`ï¼‰
- ç‚¹ç·š/ç ´ç·šã®ç½«ç·šï¼ˆ`â”„`ã€`â”…`ã€`â”ˆ`ã€`â”‰`ã€`â•Œ`ã€`â•`ï¼‰
- å³çŸ¢å°ï¼ˆ`â†’`ï¼‰

**ä¾‹ï¼š**
```javascript
// åŸºæœ¬çš„ãªæ­£è¦åŒ–
_.haifun('test-oneâ€”twoâ€•three')
// => 'testâ€oneâ€twoâ€three'

// æ§˜ã€…ãªãƒ€ãƒƒã‚·ãƒ¥ã‚’å«ã‚€æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆ
_.haifun('æ±äº¬ãƒ¼å¤§é˜ªâ€”åå¤å±‹')
// => 'æ±äº¬â€å¤§é˜ªâ€åå¤å±‹'

// æ··åœ¨ã™ã‚‹Unicodeãƒ€ãƒƒã‚·ãƒ¥
_.haifun('range: 2013â€“2024')  // enãƒ€ãƒƒã‚·ãƒ¥
// => 'range: 2013â€2024'

// ã‚«ã‚¹ã‚¿ãƒ ç½®æ›æ–‡å­—
_.haifun('a-bâ€”c', '-')
// => 'a-b-c'

// æ‹¡å¼µè§£é‡ˆï¼ˆãƒãƒ«ãƒ€ã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ãªã©ã‚’å«ã‚€ï¼‰
_.haifun('file_nameã€œtest', 'â€', true)
// => 'fileâ€nameâ€test'

// ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¤œç´¢ã®æ­£è¦åŒ–
const searchTerm = _.haifun(userInput)
const query = `SELECT * FROM products WHERE _.haifun(name) LIKE '%${searchTerm}%'`

// ãƒ†ã‚­ã‚¹ãƒˆæ¯”è¼ƒ
const normalized1 = _.haifun(text1)
const normalized2 = _.haifun(text2)
if (normalized1 === normalized2) { /* ãƒãƒƒãƒï¼ */ }
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼š**
- **æ¤œç´¢**ï¼šãƒ€ãƒƒã‚·ãƒ¥ã®ç¨®é¡ã«é–¢ä¿‚ãªããƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ³ãƒˆãƒªã¨ãƒãƒƒãƒã™ã‚‹ã‚ˆã†ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¯ã‚¨ãƒªã‚’æ­£è¦åŒ–
- **é‡è¤‡æ’é™¤**ï¼šç•°ãªã‚‹ãƒ€ãƒƒã‚·ãƒ¥æ–‡å­—ã«ã‚ˆã‚‹é‡è¤‡ã‚¨ãƒ³ãƒˆãƒªã‚’æ¤œå‡º
- **ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**ï¼šä¸€è²«æ€§ã®ãªã„ãƒ€ãƒƒã‚·ãƒ¥ä½¿ç”¨ã®CSV/Excelãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- **ä½æ‰€ãƒãƒƒãƒãƒ³ã‚°**ï¼šãƒ€ãƒƒã‚·ãƒ¥ãŒç•°ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ä½æ‰€ã‚’æ¯”è¼ƒï¼ˆä¾‹ï¼šéƒµä¾¿ç•ªå·ï¼‰
- **å•†å“ã‚³ãƒ¼ãƒ‰**ï¼šæ§˜ã€…ãªãƒ€ãƒƒã‚·ãƒ¥ã‚¿ã‚¤ãƒ—ã®SKUã‚„å“ç•ªã‚’æ­£è¦åŒ–

## JSONãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

### `parseJSON(str)`

å®‰å…¨ãªJSON/JSON5ãƒ‘ãƒ¼ã‚¹ã€‚ã‚¨ãƒ©ãƒ¼æ™‚ã¯`null`ã‚’è¿”ã—ã€try-catchä¸è¦ã€‚

```javascript
_.parseJSON('{"key": "value"}')           // => {key: "value"}
_.parseJSON('{key: "value"}')             // => {key: "value"} (JSON5ã‚µãƒãƒ¼ãƒˆ)
_.parseJSON('invalid')                    // => null (ã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ã—ãªã„)
_.parseJSON(null)                         // => null
_.parseJSON({already: "object"})          // => {already: "object"}
```

### `jsonStringify(obj)`

æœ‰åŠ¹ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ/é…åˆ—ã®ã¿ã‚’stringifyã€‚èª¤ã£ãŸæ–‡å­—åˆ—/æ•°å€¤ã®stringifyã‚’é˜²æ­¢ã€‚

```javascript
_.jsonStringify({key: "value"})           // => '{"key":"value"}'
_.jsonStringify("string")                 // => null ('"string"'ã‚’é˜²ã)
_.jsonStringify(123)                      // => null (ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ/é…åˆ—ã®ã¿)
_.jsonStringify(null)                     // => null

// JSON5æ–‡å­—åˆ—ã¯JSONã«æ­£è¦åŒ–
_.jsonStringify('{key: "value"}')         // => '{"key":"value"}'
```

## æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†

### `toFullWidth(value, withHaifun?)`

åŠè§’æ–‡å­—ã‚’å…¨è§’ã«å¤‰æ›ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒã‚¤ãƒ•ãƒ³æ­£è¦åŒ–ã€‚å…¨è§’å…¥åŠ›ã‚’è¦æ±‚ã™ã‚‹æ—¥æœ¬ã®ä½æ‰€ãƒ•ã‚©ãƒ¼ãƒ ã«æœ€é©ã€‚

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼š**
- `value: unknown` - å¤‰æ›ã™ã‚‹å€¤
- `withHaifun?: string` - ãƒã‚¤ãƒ•ãƒ³ç”¨ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç½®æ›æ–‡å­—ï¼ˆä¾‹ï¼š`'ãƒ¼'`ï¼‰

**å‡¦ç†ï¼š**
1. åŠè§’ã‚«ã‚¿ã‚«ãƒŠã‚’å…¨è§’ã«å¤‰æ›ï¼ˆ`kanaToFull`ã‚’ä½¿ç”¨ï¼‰
2. åŠè§’è‹±æ•°å­—ã‚’å…¨è§’ã«å¤‰æ›
3. åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã«å¤‰æ›
4. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å…¨ã¦ã®ãƒã‚¤ãƒ•ãƒ³ã‚’æŒ‡å®šæ–‡å­—ã«æ­£è¦åŒ–

**ä¾‹ï¼š**
```javascript
// åŸºæœ¬çš„ãªå¤‰æ›
_.toFullWidth('ABC123')
// => 'ï¼¡ï¼¢ï¼£ï¼‘ï¼’ï¼“'

// åŠè§’ã‚«ãƒŠä»˜ã
_.toFullWidth('ï½±ï½²ï½³ ABC-123')
// => 'ã‚¢ã‚¤ã‚¦ã€€ï¼¡ï¼¢ï¼£âˆ’ï¼‘ï¼’ï¼“'

// ãƒã‚¤ãƒ•ãƒ³çµ±ä¸€ä»˜ãä½æ‰€æ­£è¦åŒ–
_.toFullWidth('æ±äº¬éƒ½åƒä»£ç”°åŒº1-2-3', 'ãƒ¼')
// => 'æ±äº¬éƒ½åƒä»£ç”°åŒºï¼‘ãƒ¼ï¼’ãƒ¼ï¼“'

// æ··åœ¨å…¥åŠ›ã®å‡¦ç†
_.toFullWidth('ï½±ï½²ï¾ï½¹ï¾ ABC-1-23', 'ãƒ¼')
// => 'ã‚¢ã‚¤ãƒã‚±ãƒ³ã€€ï¼¡ï¼¢ï¼£ãƒ¼ï¼‘ãƒ¼ï¼’ãƒ¼ï¼“'
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ - æ—¥æœ¬ã®ä½æ‰€ãƒ•ã‚©ãƒ¼ãƒ ï¼š**
å¤šãã®æ—¥æœ¬ã®Webãƒ•ã‚©ãƒ¼ãƒ ã¯ä½æ‰€ã«å…¨è§’å…¥åŠ›ã‚’è¦æ±‚ã—ã¾ã™ã€‚ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ä»£ã‚ã‚Šã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’è‡ªå‹•çš„ã«æ­£è¦åŒ–ï¼š

```javascript
// ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ•ã‚©ãƒ¼ãƒ å‡¦ç†
const normalizedAddress = _.toFullWidth(userInput, 'ãƒ¼')
// ã©ã‚“ãªå…¥åŠ›å½¢å¼ã‚‚å—ã‘ä»˜ã‘ã€ãƒ•ã‚©ãƒ¼ãƒ è¦ä»¶ã«å¤‰æ›
```

### `toHalfWidth(value, withHaifun?)`

å…¨è§’æ–‡å­—ã‚’åŠè§’ã«å¤‰æ›ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒã‚¤ãƒ•ãƒ³æ­£è¦åŒ–ã€‚

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼š**
- `value: unknown` - å¤‰æ›ã™ã‚‹å€¤
- `withHaifun?: string` - ãƒã‚¤ãƒ•ãƒ³ç”¨ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç½®æ›æ–‡å­—ï¼ˆä¾‹ï¼š`'-'`ï¼‰

**å‡¦ç†ï¼š**
1. å…¨è§’è‹±æ•°å­—ã‚’åŠè§’ã«å¤‰æ›
2. å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã«å¤‰æ›
3. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å…¨ã¦ã®ãƒã‚¤ãƒ•ãƒ³ã‚’æŒ‡å®šæ–‡å­—ã«æ­£è¦åŒ–

**ä¾‹ï¼š**
```javascript
// åŸºæœ¬çš„ãªå¤‰æ›
_.toHalfWidth('ï¼¡ï¼¢ï¼£ï¼‘ï¼’ï¼“')
// => 'ABC123'

// ãƒã‚¤ãƒ•ãƒ³æ­£è¦åŒ–ä»˜ã
_.toHalfWidth('æ±äº¬éƒ½åƒä»£ç”°åŒºï¼‘ãƒ¼ï¼’ãƒ¼ï¼“', '-')
// => 'æ±äº¬éƒ½åƒä»£ç”°åŒº1-2-3'

// å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã®å‡¦ç†
_.toHalfWidth('ï¼¡ï¼¢ï¼£ã€€ï¼‘ï¼’ï¼“')
// => 'ABC 123'
```

### `kanaToFull(str)`

åŠè§’ã‚«ã‚¿ã‚«ãƒŠã‚’å…¨è§’ã«å¤‰æ›ã€æ¿ç‚¹ï¼ˆã‚›ï¼‰ã¨åŠæ¿ç‚¹ï¼ˆã‚œï¼‰ã®çµåˆæ–‡å­—ã‚’é©åˆ‡ã«å‡¦ç†ã€‚

```javascript
_.kanaToFull('ï½±ï½²ï½³ï½´ï½µ')  // => 'ã‚¢ã‚¤ã‚¦ã‚¨ã‚ª'
_.kanaToFull('ï½¶ï¾ï½·ï¾ï½¸ï¾ï½¹ï¾ï½ºï¾')  // => 'ã‚¬ã‚®ã‚°ã‚²ã‚´' (æ¿ç‚¹ãŒæ­£ã—ãå‡¦ç†ã•ã‚Œã‚‹)
_.kanaToFull('ï¾Šï¾Ÿï¾‹ï¾Ÿï¾Œï¾Ÿï¾ï¾Ÿï¾ï¾Ÿ')  // => 'ãƒ‘ãƒ”ãƒ—ãƒšãƒ' (åŠæ¿ç‚¹ãŒæ­£ã—ãå‡¦ç†ã•ã‚Œã‚‹)
```

### `kanaToHalf(str)`

å…¨è§’ã‚«ã‚¿ã‚«ãƒŠã‚’åŠè§’ã«å¤‰æ›ã€æ¿ç‚¹ã¨åŠæ¿ç‚¹ã‚’é©åˆ‡ã«åˆ†å‰²ã€‚

**æ³¨æ„ï¼š** åŠè§’ã‚«ã‚¿ã‚«ãƒŠã¯çµåˆæ–‡å­—ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€å‡ºåŠ›ã®é•·ã•ãŒå…¥åŠ›ã¨ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

```javascript
_.kanaToHalf('ã‚¢ã‚¤ã‚¦ã‚¨ã‚ª')  // => 'ï½±ï½²ï½³ï½´ï½µ'
_.kanaToHalf('ã‚¬ã‚®ã‚°ã‚²ã‚´')  // => 'ï½¶ï¾ï½·ï¾ï½¸ï¾ï½¹ï¾ï½ºï¾' (æ¿ç‚¹æ–‡å­—ã”ã¨ã«2æ–‡å­—)
_.kanaToHalf('ãƒ‘ãƒ”ãƒ—ãƒšãƒ')  // => 'ï¾Šï¾Ÿï¾‹ï¾Ÿï¾Œï¾Ÿï¾ï¾Ÿï¾ï¾Ÿ' (åŠæ¿ç‚¹æ–‡å­—ã”ã¨ã«2æ–‡å­—)
```

**è­¦å‘Šï¼š** åŠè§’ã‚«ã‚¿ã‚«ãƒŠã¯ãƒ¬ã‚¬ã‚·ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã§å•é¡Œã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚Šã€ãƒ¢ãƒ€ãƒ³ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ä¸€èˆ¬çš„ã«æ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚äº’æ›æ€§ã®ãŸã‚ã«å¿…è¦ãªå ´åˆã®ã¿ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

### `kanaToHira(str)`

ã‚«ã‚¿ã‚«ãƒŠã‚’ã²ã‚‰ãŒãªã«å¤‰æ›ã€‚

```javascript
_.kanaToHira('ã‚¢ã‚¤ã‚¦ã‚¨ã‚ª')  // => 'ã‚ã„ã†ãˆãŠ'
_.kanaToHira('ã‚«ã‚¿ã‚«ãƒŠ')    // => 'ã‹ãŸã‹ãª'
```

### `hiraToKana(str)`

ã²ã‚‰ãŒãªã‚’ã‚«ã‚¿ã‚«ãƒŠã«å¤‰æ›ã€‚

```javascript
_.hiraToKana('ã‚ã„ã†ãˆãŠ')  // => 'ã‚¢ã‚¤ã‚¦ã‚¨ã‚ª'
_.hiraToKana('ã²ã‚‰ãŒãª')    // => 'ãƒ’ãƒ©ã‚¬ãƒŠ'
```

### `isValidStr(str)`

å€¤ãŒéç©ºæ–‡å­—åˆ—ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã€‚

```javascript
_.isValidStr('')             // => false
_.isValidStr('hello')        // => true
_.isValidStr(null)           // => false
```

## ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### `waited(func, frameCount)`

`requestAnimationFrame`ã‚’ä½¿ç”¨ã—ã¦Nå€‹ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ å¾Œã«é–¢æ•°ã‚’å®Ÿè¡Œã€‚ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ›´æ–°ã‚’å¾…ã¤éš›ã®æ£æ„çš„ãª`setTimeout`é…å»¶ã‚’æ’é™¤ã€‚

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼š**
- `func: () => void` - å¾…æ©Ÿå¾Œã«å®Ÿè¡Œã™ã‚‹é–¢æ•°
- `frameCount?: number` - æœ€åˆã®`requestAnimationFrame`ã®å¾Œã«å¾…ã¤**è¿½åŠ ã®**ãƒ•ãƒ¬ãƒ¼ãƒ æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼š`0`ï¼‰
  - `0` = æ¬¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã§å®Ÿè¡Œï¼ˆ1å›ã®RAFå‘¼ã³å‡ºã—ï¼‰
  - `1` = 2ãƒ•ãƒ¬ãƒ¼ãƒ å¾Œã«å®Ÿè¡Œï¼ˆ2å›ã®RAFå‘¼ã³å‡ºã—ï¼‰
  - `2` = 3ãƒ•ãƒ¬ãƒ¼ãƒ å¾Œã«å®Ÿè¡Œï¼ˆ3å›ã®RAFå‘¼ã³å‡ºã—ï¼‰

**ãªãœ`setTimeout`ã§ã¯ãªã`waited`ã‚’ä½¿ã†ã®ã‹ï¼Ÿ**

ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ™ãƒ¼ã‚¹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ã€CPUé€Ÿåº¦ã«é–¢ä¿‚ãªãå®Ÿéš›ã®DOMæ›´æ–°å¾Œã®å®Ÿè¡Œã‚’ä¿è¨¼ã—ã€ç«¶åˆçŠ¶æ…‹ã¨éå‰°ãªå¾…æ©Ÿã®ä¸¡æ–¹ã‚’é˜²ãã¾ã™ã€‚ãƒŸãƒªç§’ã§ã¯ãªããƒ•ãƒ¬ãƒ¼ãƒ æ•°ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒã‚¤ã‚¹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ä¿‚ãªãå®Ÿéš›ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚µã‚¤ã‚¯ãƒ«ã«ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒé©å¿œã—ã¾ã™ã€‚

**ã“ã‚Œã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®çŠ¶æ…‹æ›´æ–°**ï¼ˆReactã®setStateãªã©ï¼‰ãŒDOMã«åæ˜ ã•ã‚Œã‚‹ã®ã‚’å¾…ã¤å ´åˆã«ç‰¹ã«æœ‰ç”¨ã§ã™ã€‚

**ä¾‹ï¼š**
```javascript
// åŸºæœ¬çš„ãªä½¿ã„æ–¹ - 1ãƒ•ãƒ¬ãƒ¼ãƒ å¾…æ©Ÿ
_.waited(() => {
  console.log('1ãƒ•ãƒ¬ãƒ¼ãƒ å¾Œã«å®Ÿè¡Œ')
}, 1)

// Reactã®çŠ¶æ…‹ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’å¾…ã¤
function handleUpdate() {
  setData(newData)
  _.waited(() => {
    // React ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾Œã®å®Ÿè¡ŒãŒä¿è¨¼ã•ã‚Œã‚‹
    scrollToElement()
    measureHeight()
  }, 1) // 2ãƒ•ãƒ¬ãƒ¼ãƒ å¾…æ©Ÿ
}

// é‡ã„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° - ã•ã‚‰ã«å¤šãã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’å¾…ã¤
function complexUpdate() {
  setComplexState(data)
  _.waited(() => {
    // é‡ã„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç”¨ã«3ãƒ•ãƒ¬ãƒ¼ãƒ å¾…æ©Ÿ
    startAnimation()
  }, 2)
}

// å³åº§ã«æ¬¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆframeCount = 0ï¼‰
_.waited(() => {
  console.log('æ¬¡ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ã§å®Ÿè¡Œ')
})
```

**ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼š**
- React/Vueã®çŠ¶æ…‹æ›´æ–°ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’å¾…ã¤
- å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å¤‰æ›´å¾Œã®DOMæ¸¬å®š
- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨ˆç®—å¾Œã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¢ºå®Ÿã«é–‹å§‹
- ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚µã‚¤ã‚¯ãƒ«ã¨ã®åŒæœŸ

**`setTimeout`ã¨ã®æ¯”è¼ƒï¼š**
```javascript
// âŒ æ‚ªã„ï¼šæ£æ„çš„ãªé…å»¶ã€æ—©ã™ããŸã‚Šé…ã™ããŸã‚Šã™ã‚‹å¯èƒ½æ€§
setTimeout(() => {
  const height = element.offsetHeight  // é–“é•ã£ã¦ã„ã‚‹å¯èƒ½æ€§ï¼
}, 100)

// âœ… è‰¯ã„ï¼šå®Ÿéš›ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’å¾…ã¤
_.waited(() => {
  const height = element.offsetHeight  // æ­£ç¢ºï¼
}, 1)
```

## å…¨ã¦ã®lodashé–¢æ•°

å…ƒã®lodashé–¢æ•°ã‚‚å…¨ã¦åˆ©ç”¨å¯èƒ½ã§ã™ã€‚
isEmpty,toNumber,castArrayã®æ›¸ãæ›ãˆå‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯
isEmptyOrg,toNumberOrg,castArrayOrgã«ç”¨æ„ã—ã¦ã‚ã‚‹ãŸã‚ã€
åˆ©ç”¨ã‚·ãƒ¼ãƒ³ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ã¦ãã ã•ã„ã€‚

å®Œå…¨ãªãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯[lodashãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://lodash.com/docs)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚